(this.webpackJsonpworking=this.webpackJsonpworking||[]).push([[0],{21:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(1),a=t.n(c),o=t(15),u=t.n(o),i=(t(21),t(6)),s=t(3),d=function(e){var n=e.handleDelete;return Object(r.jsx)("button",{onClick:n,children:"delete"})},l=function(e){var n=e.name,t=e.number,c=e.handleDelete;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("p",{children:[n," ",t]})," ",Object(r.jsx)(d,{handleDelete:c})]})},b=function(e){var n=e.searchTerm,t=e.entries,c=e.deletionHandler;return Object(r.jsx)(r.Fragment,{children:(""===n?t:t.filter((function(e){return e.name.toLowerCase().includes(n)}))).map((function(e){return Object(r.jsx)(l,{name:e.name,number:e.number,handleDelete:function(){return c(e.name,e.id)}},e.id)}))})},h=function(e){return Object(r.jsxs)("div",{children:[e.name,": ",Object(r.jsx)("input",{value:e.value,onChange:e.onChange})]})},j=function(e){var n=e.submissionHandler,t=e.newName,c=e.nameChange,a=e.newPhoneNum,o=e.phoneChange;return Object(r.jsxs)("form",{onSubmit:n,children:[Object(r.jsxs)("div",{children:[Object(r.jsx)(h,{name:"name",value:t,onChange:c})," ",Object(r.jsx)(h,{name:"number",value:a,onChange:o})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})},m=function(e){var n=e.searchTerm,t=e.onChange;return Object(r.jsxs)("div",{children:["filter shown with ",Object(r.jsx)("input",{value:n,onChange:t})]})},f=t(4),O=t.n(f),g="/api/persons",v={addNumber:function(e){return O.a.post(g,e).then((function(e){return e.data}))},deleteNumber:function(e){return O.a.delete("".concat(g,"/").concat(e)).then((function(e){return e.data}))},getAllNumbers:function(){return O.a.get(g).then((function(e){return e.data}))},modifyNumber:function(e,n){return console.log("entry to modify",n," at ","".concat(g,"/").concat(e)),O.a.put("".concat(g,"/").concat(e),n).then((function(e){return e.data}))}},x=function(e){var n=e.messageStatus;if(null===n)return Object(r.jsx)(r.Fragment,{});return Object(r.jsx)("p",{style:n.isError?{color:"red",width:500,borderWidth:"thin",border:"solid red"}:{color:"green",width:500,borderWidth:"thin",border:"solid green"},children:n.message})},p=function(){var e=Object(c.useState)([]),n=Object(s.a)(e,2),t=n[0],a=n[1],o=Object(c.useState)(0),u=Object(s.a)(o,2),d=u[0],l=u[1],h=Object(c.useState)(""),f=Object(s.a)(h,2),O=f[0],g=f[1],p=Object(c.useState)(""),w=Object(s.a)(p,2),C=w[0],y=w[1],N=Object(c.useState)(""),S=Object(s.a)(N,2),k=S[0],T=S[1],E=Object(c.useState)(null),D=Object(s.a)(E,2),H=D[0],A=D[1];Object(c.useEffect)((function(){v.getAllNumbers().then((function(e){a(e),e.length>0&&l(e[e.length-1].id)}))}),[]);var F=function(){g(""),y("")};return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(x,{messageStatus:H}),Object(r.jsx)(m,{searchTerm:k,onChange:function(e){T(e.target.value.toLowerCase())}}),Object(r.jsx)(j,{submissionHandler:function(e){e.preventDefault();var n=t.find((function(e){return e.name===O.trim()}));if(void 0===n){var r={name:O.trim(),number:C,id:d+1};v.addNumber(r).then((function(){a(t.concat(r)),l(d+1),A({isError:!1,message:"".concat(O," has been successfully added!")}),setTimeout((function(){return A(null)}),3e3),F()}))}else{var c="".concat(O," is already in the phonebook. Would you like to overwrite their info?");window.confirm(c)&&v.modifyNumber(n.id,Object(i.a)(Object(i.a)({},n),{},{number:C})).then((function(e){a(t.map((function(t){return t.id===n.id?e:t}))),A({isError:!1,message:"".concat(O,"'s number has been updated!")}),setTimeout((function(){return A(null)}),3e3),F()}))}},newName:O,nameChange:function(e){g(e.target.value)},newPhoneNum:C,phoneChange:function(e){y(e.target.value)}}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(b,{searchTerm:k,entries:t,deletionHandler:function(e,n){var r="Are you sure that you want to delete ".concat(e,"?");window.confirm(r)&&v.deleteNumber(n).then((function(e){var r=t.filter((function(e){return e.id!==n}));a(r),n===d&&r.length>0?l(r[r.length-1].id):0===r.length&&l(0),A({isError:!1,message:"".concat(O," has been deleted!")}),setTimeout((function(){return A(null)}),3e3)})).catch((function(e){console.log("deletion failed ",e),A({isError:!0,message:"".concat(O," has already been deleted!")}),setTimeout((function(){return A(null)}),3e3)}))}})]})};u.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(p,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.029fc522.chunk.js.map